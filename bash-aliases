alias py=python
alias ll='ls -alF'
alias box='ssh skier@box.haxx.in'
alias box2='ssh skier@nala.villavu.com -p54322'
alias ls='ls --color=always'
alias rvim='vim -R -'
alias srvim='sort | uniq -c | sort | vim -R -'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias tmp='cd /tmp'

alias maek=make
alias mkae=make
alias amke=make
alias amek=make

alias mk=make
alias mkc='make -C'
alias mc='make clean'
alias mt='make test'

# git shortcuts
alias ga='git add'
alias gap='git add -p'
alias gb='git branch'
alias gba='git branch -a'
alias gbd='git branch -D'
alias gc='git commit'
alias gch='git checkout'
alias gchb='git checkout -b'
alias gchd='git checkout development'
alias gchm='git checkout master'
alias gm='git merge'
alias gmt='git mergetool'
alias sps='git stash && git pull -r && git stash pop'
alias grh='git reset HEAD'
alias gpl='git pull'
alias gplo='git pull origin'
alias gplom='git pull origin master'
alias gplr='git pull -r'
alias gplro='git pull -r origin'
alias gplrom='git pull -r origin master'
alias gps='git push'
alias gpso='git push origin'
alias gpsom='git push origin master'
alias gr='git rebase'
alias grc='git rebase --continue'
alias gra='git rebase --abort'

pause() {
    echo
    (for i in {0..5}; do sleep 1 ; echo -n . ; done) &
    read -p "$*" -t 5
}

gcam() {
    git commit -am "$*" || {
        pause Nothing to commit, going to --amend now.
        git commit -am "$*" --amend
    }
}

gcm() {
    git commit -m "$*" || {
        pause Nothing to commit, going to --amend now.
        git commit -m "$*" --amend
    }
}

# add a path to $PATH if it's not already in there and the directory exists
pathadd() {
    if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
        PATH="${PATH:+"$PATH:"}$1"
    fi
}

# under linux we don't want to add |less to the commands, as this happens
# by default
if [ "$OS" == "Windows_NT" ]; then
    alias cac='git diff --cached | less'
    alias gl='git log | less'
    alias gst='git status | less'

    gd() {
        git diff $* |less
    }

    gsh() {
        git show $* |less
    }
else
    alias cac='git diff --cached'
    alias gd='git diff'
    alias gl='git log'
    alias gsh='git show'
    alias gst='git status'
fi

if [ "$OS" == "Windows_NT" ]; then
    # default installation paths
    alias vim="'$PROGRAMFILES/Vim/vim73/gvim.exe'"
    alias py26='/c/Python26/python.exe'
    alias putty="'$PROGRAMFILES/putty.exe'"
    alias telnet='putty -telnet'
    alias tig='/c/cygwin/bin/tig.exe'

    # add python27 to the path
    pathadd "/c/Python27"

    6p() { curl -s -F "content=<${1--}" -F ttl=604800 -w "%{redirect_url}\n" \
        -o /dev/null https://p.6core.net/ | putclip ; getclip ; }

    # if /d/Git exists, then assume it's our default directory
    if [ -d /d/Git ]; then
        cd /d/Git
    fi
else
    # would be weird if this directory is not in $PATH, but oh well..
    pathadd "/usr/bin"

    # automaticall start irc if we are *not* inside tmux
    alias irc='screen -UDr'
    if [ -z "$TMUX" ]; then
        screen -UDr
    fi
fi

ftrvim() {
    vim -R -c 'set ft='$1 -
}

# include the autogenerated file
if [ -f ~/.bash_aliases_auto ]; then
    source ~/.bash_aliases_auto
fi
